@if (hierarchyResponse) {
  <div class="hierarchy-container">
    <!-- User Entity Info Header -->
    <div class="mb-4 p-3 rounded-lg bg-brand-50 dark:bg-brand-900/20 border border-brand-200 dark:border-brand-800">
      <div class="text-xs font-semibold text-brand-700 dark:text-brand-300 mb-1">Your Entity</div>
      <div class="text-sm font-medium text-gray-900 dark:text-white">{{ hierarchyResponse.userEntity.name }}</div>
      @if (hierarchyResponse.userEntity.email_id) {
        <div class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">{{ hierarchyResponse.userEntity.email_id }}</div>
      }
    </div>

    <!-- Selected Resource Info -->
    <div class="mb-4 p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800">
      <div class="text-xs font-semibold text-blue-700 dark:text-blue-300 mb-1">Selected Resource</div>
      <div class="text-sm font-medium text-gray-900 dark:text-white">{{ hierarchyResponse.selectedResource.name }}</div>
      <div class="text-xs text-gray-500 dark:text-gray-400 mt-0.5 capitalize">{{ hierarchyResponse.selectedResource.type }}</div>
    </div>

    <!-- Entity Hierarchy -->
    @if (isEntityResponse(hierarchyResponse)) {
      <div class="mb-2">
        <div class="text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2">Entity Hierarchy:</div>
        <app-entity-hierarchy-node 
          [node]="hierarchyResponse.hierarchy" 
          [level]="0">
        </app-entity-hierarchy-node>
      </div>
    }

    <!-- User Hierarchy -->
    @if (isUserResponse(hierarchyResponse)) {
      <div class="space-y-4">
        <div>
          <div class="text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2">Entity Hierarchy:</div>
          <app-entity-hierarchy-node 
            [node]="hierarchyResponse.entityHierarchy" 
            [level]="0">
          </app-entity-hierarchy-node>
        </div>
        <div>
          <div class="text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2">User Hierarchy:</div>
          <app-user-hierarchy-node 
            [node]="hierarchyResponse.userHierarchy" 
            [level]="0">
          </app-user-hierarchy-node>
        </div>
      </div>
    }

    <!-- Profile Hierarchy -->
    @if (isProfileResponse(hierarchyResponse)) {
      <div class="space-y-4">
        <div class="p-3 rounded-lg bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800">
          <div class="text-xs font-semibold text-purple-700 dark:text-purple-300 mb-1">Profile</div>
          <div class="text-sm font-medium text-gray-900 dark:text-white">{{ hierarchyResponse.profile.name }}</div>
        </div>
        <div>
          <div class="text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2">Entity Hierarchy:</div>
          <app-entity-hierarchy-node 
            [node]="hierarchyResponse.entityHierarchy" 
            [level]="0">
          </app-entity-hierarchy-node>
        </div>
      </div>
    }

    <!-- Role Hierarchy -->
    @if (isRoleResponse(hierarchyResponse)) {
      <div class="space-y-4">
        <div class="p-3 rounded-lg bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800">
          <div class="text-xs font-semibold text-orange-700 dark:text-orange-300 mb-1">Role</div>
          <div class="text-sm font-medium text-gray-900 dark:text-white">{{ hierarchyResponse.role.name }}</div>
        </div>
        <div>
          <div class="text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2">Entity Hierarchy:</div>
          <app-entity-hierarchy-node 
            [node]="hierarchyResponse.entityHierarchy" 
            [level]="0">
          </app-entity-hierarchy-node>
        </div>
      </div>
    }
  </div>
}
